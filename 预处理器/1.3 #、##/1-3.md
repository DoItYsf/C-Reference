# **# 与 ## 运算符**
在仿宏函数中，*replacement-list* 中标识符前的 # 运算符对标识符做形参替换，并将结果环绕在引号中，等效地创建一个字符串字面量。而且，预处理器会添加反斜杠，以转义环绕内嵌字符串字面量的引号，若存在，并按需在字符串中双写反斜杠。它移除所有前导和尾随空白符，且将任何文本中部的空白符序列（但非内嵌字符串字面量中的）缩减成单个空格。此运算被称作“字符串化”。若字符串化的结果不是合法字符串字面量，则行为未定义。
```c
/*************************************************************************
	> File Name: 1-3-1.c
	> Author: DoItYsf
	> Mail: javathon@hotmail.com
	> Created Time: 2022年01月06日 星期四 12时00分35秒
 ************************************************************************/

#include<stdio.h>
#define print(...) printf(#__VA_ARGS__)
int main(){
    print(hello,world\n);
    return 0;
}
```
编译指令：
```shell
gcc 1-3-1.c -o 1-3-1
```
执行结果：
```shell
> ./1-3-1
hello,world
```
替换列表中任意两个相继标识符之间的 `##` 运算符对两个标识符进行参数替换，然后连接结果。此运算被称为 *连接* 或 *记号粘贴* 。只可以粘贴有一同组成合法记号的记号：组成较长标识符的标识符、组成数字的数位或组成 `+=` 的运算符 `+` 和 `=` 。不能通过粘贴 `/` 与 `*` 来创建注释，因为注释在宏替换阶段前就移除了。若连接的结果不是合法记号，则行为未定义。

注意：一些编译器提供允许 `##` 出现在逗号后和 `__VA_ARGS__` 前的扩展，在此情况下 `##` 在 `__VA_ARGS__` 非空时无效，但在 `__VA_ARGS__` 为空时一处都好：这使得可以定义如：`fprintf(stderr, format, ##__VA_ARGS__)` 的宏。

## **预定义宏**
|预定义在任意翻译单元中的宏名||
|---------------------------|----------------------------------|
|`__STDC__`|展开成整数常量 1 .此宏用以指示一致实现。|
|`__STDC_VERSION__`|展开成 `long` 类型的整数常量，其值随着C标准的每个版本递增。|
|`__STDC_HOSTED__`|若实现在操作系统环境下，则展开为 1，若为独立的则展开为 0。|
|`__FILE__`|展开当前文件名，为字符串自卖能量，可用`#line`指令更改。|
|`__LINE__`|展开为源文件行号，为整数常量，可用`#line`指令更改。|
|`__DATE__`|展开为翻译的日期，格式为 "Mmm dd yyyy" 的字符串字面量。月份名如同以 [`asctime`]()生成，而若月份小于 10，则 "dd" 前面的首字符为空格|
|`__TIME__`|展开为翻译的时间，格式为 "hh:mm:ss" 的字符串字面量，如同 `asctime()` 所生成|
```c
/*************************************************************************
	> File Name: 1-3-2.c
	> Author: DoItYsf
	> Mail: javathon@hotmail.com
	> Created Time: 2022年01月06日 星期四 12时32分29秒
 ************************************************************************/

#include<stdio.h>

int main(){
    puts(__DATE__);
    puts(__TIME__);
    printf("This is line:%d\n",__LINE__);
    return 0;
}
```
编译指令：
```shell
gcc 1-3-2.c -o 1-3-2
```
执行结果：
```shell
> ./1-3-2
Jan  6 2022
12:38:28
This is line:13
```
注意：预定义对象 `__func__` （见[函数定义]()）不是预处理器宏，尽管有时与 `__FILE__` 以及 `__LINE__` 一同使用（例如：通过 [`assert`]() ）。
```c
/*************************************************************************
	> File Name: 1-3-3.c
	> Author: DoItYsf
	> Mail: javathon@hotmail.com
	> Created Time: 2022年01月06日 星期四 12时53分50秒
 ************************************************************************/

#include<stdio.h>
#define FUNCTION(name, arg) int func_##name(int x){return (arg) * x;}
FUNCTION(f1,3);
FUNCTION(f2,5);
#undef FUNCTION
int main(){
    printf("func_f1(6) = %d\n",func_f1(6));
    printf("func_f2(5) = %d\n",func_f2(5));
    return 0;
}
```
```shell
gcc 1-3-3.c -o 1-3-3
```
```shell
> ./1-3-3
func_f1(6) = 18
func_f2(5) = 25
```