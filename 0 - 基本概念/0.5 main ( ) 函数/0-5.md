# **main函数**
每个要在操作系统环境中运行的编码 C 程序都含有称作 `main` 的函数定义，他是函数的受指定起始点。
```c
int main(void) { body }
int main(int argc, char *argv[]) { body }
//C99起，有其他的实现定义
```
## **参数**
**argc** 
- 代表程序所运行的环境传递给程序的参数数量。

**argv**
- 指向 `argc+1` 个指针的数组的首元素的指针。数组末尾元素为空指针，而若前面有元素，则它们指向表示从操作系统传递给程序的参数的字符串。若 `argv[0]` 不是空指针（或等价的 `argc` > 0），则它指向表示程序名的字符串。若程序名从宿主环境不可用则该字符串为空。

名称 `argc` 和 `argv` 表示参数计数和参数向量。参数的名称和类型表示是任意的。 `int main(int ac, char ** av)` 同样合法。

`main` 的常见实现定义形式是 `int main(int argc, char * argv[], char *envp[])` ，其中第三个参数类型为 `char **` ，指向[指向执行环境变量的指针数组]()。

## **返回值**

若使用返回语句，则返回值会用作隐式调用 `exit()` 的参数。值 0 和 [EXIT_SUCCESS]() 指示成功终止，值 [EXIT_FAILURE]()指示不成功终止。

## **解释**

在程序启动时，初始化所有静态存储器对象后调用 `main` 函数。它指明执行于操作系统中的程序入口点。任何独立程序（引导程序、操作系统核心等）的入口点的名称和类型是实现定义的。

主函数的双参数形式允许从执行环境传递任意的多字节字符串（常称作：*命令行参数*）。指针 `argv[1] ... argv[argc-1]` 指向每个这些字符串的首字符。`argv[0]` 指向代表用于调用程序自身的名称的，空终止多字节字符串的首字符。

若操作系统环境不能提供大写和小写字母，则转换命令行参数为小写。

字符串可修改，而且任何修改会留存到程序终止时，尽管这些修改不会返回到操作系统环境中：例如能以 [`strtok`]() 使用它们。

`argv` 所指的数组的大小至少是 `argc+1`，并保证末尾元素 `argv[argc]` 为空指针。
`main` 函数所拥有的特殊属性：
- 程序不能提供此函数的原型
- 若主函数的返回类型与 `int` 兼容，则从对 `main` 的初次调用返回，等价于以主函数返回值为参数执行 [`exit`]() 函数（将调用 [`atexit`]()所注册的函数，冲入并关闭所有流，删除 [`tmpfile`]()所创建的文件，并返还控制给执行环境）
- 若 `main` 函数执行不指定值的 `return` ，或者未执行 `return` 就到达结尾，则返回给操作系统的状态未定义。
- 若 `main` 函数的返回值与 `int` 不兼容（如：`void main(void)` ），则返回给操作系统的值未指定。若返回类型与 `int` 兼容并控制抵达结尾，则返回给执行环境的值与如同执行 `return 0;` 的结果相同。

```c
/*************************************************************************
	> File Name: 0-5-1.c
	> Author: DoItYsf
	> Mail: javathon@hotmail.com
	> Created Time: 2022年01月06日 星期四 08时09分19秒
 ************************************************************************/

#include<stdio.h>
int main(int argc, char* argv[]){
    printf("argc = %d\n",argc);
    for(int index = 0; index < argc; index++)
        printf("argv[%d] = \'%s\'\n",index,argv[index]);
    printf("argv[argc] = %p\n",(void*)argv[argc]);
}
```
编译指令：
```shell
gcc 0-5-1.c -o 0-5-1
```
执行结果：
```shell
> ./0-5-1 hello world
argc = 3
argv[0] = './0-5-1'
argv[1] = 'hello'
argv[2] = 'world'
argv[argc] = (nil)
```